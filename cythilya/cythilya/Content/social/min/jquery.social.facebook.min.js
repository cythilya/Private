var login=function(){var e="https://www.facebook.com/dialog/oauth?client_id=698238793579627&redirect_uri=http://cythilya.apphb.com:52533/Social/Facebook/TaggableFriends&scope=publish_actions";location.href=e},SocialDemo={};SocialDemo.module={version:"0.1",nameSocialDemoace:function(e){var o,n=e.SocialDemolit("."),t=SocialDemo;for("SocialDemo"===n[0]&&(n=n.slice(1)),o=0;o<n.length;o+=1)"undefined"==typeof t[n[o]]&&(t[n[o]]={}),t=t[n[o]];return t},inherit:function(e,o){e.prototype=new o},taggableFriends:function(e){var e=$(e),o=e.find(".friendList"),n=e.find(".message"),t=e.find(".btnShare"),i=e.find(".btnFBLogin"),a="";i.click(function(e){e.preventDefault(),login()}),FBUtil.after(function(e){e.getLoginStatus(function(a){"connected"===a.status&&(i.hide(),n.show(),t.show(),o.show(),n.html("Loading..."),e.api("/me/taggable_friends",function(e){if(e&&!e.error){var t=e.data;n.html(""),$.each(t,function(e,n){var i=t[e].picture.data.url;HTML="",HTML+=['<div class="friend">','	<a target="_blank">','		<img src="'+i+'">',"	</a>",'	<div class="name">'+t[e].name+"</div>",'   <div class="check"><input type="checkbox" class="checkbox" data-id="'+n.id+'"></div>',"</div>"].join(""),o.append(HTML)})}}))})}),t.click(function(e){e.preventDefault();var n=o.find(".friend"),t=[];n.each(function(e,o){var n=$(o).find(".checkbox");n.attr("checked")&&t.push(n.data("id"))}),a=t.join(","),FB.login(function(){var e={};e.name="Facebook Graph API & Demo Example - Taggable Friends",e.caption="Facebook Graph API & Demo Example - Taggable Friends",e.description="Taggable Friends",e.message="Graph API是Facebook所推出的一種技術標準，它的核心概念是「物件與連結」。為什麼稱為「Graph API」呢？因為整個Facebook就是透過這些物件與連結建立而成的Social Graph。Facebook所提供存取的介面，就稱為「Graph API」。",e.link="http://bit.ly/1qtutRh",e.picture="https://lh4.googleusercontent.com/-nw381RE73SY/U5KlRrevDFI/AAAAAAAACMQ/FJnuqzQfnMA/w764-h509-no/twenty_800.jpg",e.tags=a,e.place="647158178704039",FB.api("/me/feed","post",e,function(e){!e||e.error?alert("Error occured"):alert("Post ID: "+e.id)})},{scope:"publish_actions"})})},loginArea:function(e){var e=$(e),o=e.find(".btnFBLogin"),n=e.find(".btnFBLibraryLogin"),t=e.find(".btnLogout");o.click(function(e){e.preventDefault();var o="698238793579627",n="https://www.facebook.com/dialog/oauth?client_id="+o+"&redirect_uri=http://cythilya.apphb.com/Social/Facebook/FacebookLogin";location.href=n}),n.click(function(e){e.preventDefault(),FB.getLoginStatus(function(e){"connected"===e.status?console.log("Logged in."):"not_authorized"===e.status||FB.login()})}),t.click(function(e){e.preventDefault(),FB.getLoginStatus(function(e){"connected"===e.status&&FB.logout(function(){location.reload()})})})}},function(){var e=function(e,o){var n=document.getElementById(e);n&&o(n)};e("taggableFriends",SocialDemo.module.taggableFriends),e("loginArea",SocialDemo.module.loginArea)}();